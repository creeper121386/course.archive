## exp2

- 任务: 建立符号表 & 报语义错误.
- 各种结构定义: def.h
- 程序入口: parser.y中,根节点调用sematic_analyze()
- 符号表:全局只有一个表,不同作用域下,指定不同的起始位置来进行管理.
- 要怎么做: 遍历ast,访问到声明部分的结点时，在符号表中添加新的内容；访问到执行语句部分时，根据访问的变量（或函数）名称查询符号表，并分析其静态语义的正确性。
- 不同作用域的处理: 
    - LEV(层号)表示不同作用域,每次遇到一个复合语句的结点COM_STM，首先对LEV加1,并使用栈symbol_scope_TX，记录该作用域变量在符号表中的起点位置，即将符号表symbolTable的栈顶位置symbolTable.index保存在栈symbol_scope_TX中。
    - 每次要登记一个新的符号到符号表中时，首先在symbolTable中，从栈顶向栈底方向查层号为LEV的符号，是否有和当前待登记的符号重名，是则报重复定义错误，否则使用LEV作为层号将新的符号登记到符号表中。
    - 每次遍历完一个复合语句结点COM_STM的所有子树，准备回到其父结点时，这时该复合语句语义分析完成，需要从符号表中删除该复合语句的变量，方法是首先symbol_scope_TX进行出栈操作，取出该复合语句作用域的起点，再根据这个值修改symbolTable.index，同时LEV减一，很简单地完成了符号表的符号删除操作。
    


